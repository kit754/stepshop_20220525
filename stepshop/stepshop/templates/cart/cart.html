{% extends 'base.html' %}
{% load static %}

{% block title %}
    {{ title|capfirst }}
{% endblock %}

{% block content %}
{% if user.is_authenticated %}
<div class="container w-50 mt-5">
    <div class="row cart-list">
        <table class="table mt-3">
            <thead>
            <tr>
                <th class="col-1">№</th>
                <th class="col">Продукт</th>
                <th class="col">Количество</th>
                <th class="col">Стоимость</th>
                <th class="col">Удалить</th>
            </tr>
            </thead>
            <tbody>
            {% for item in cart %}
            <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ item.product }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.product.price }}</td>
                <td>
                    <button class="btn btn-round">
                        <a href="{% url 'cart:remove' item.pk %}">Удалить</a>
                    </button>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>
    <div class="justify-content-end">
        Всего товаров: <strong>{{ cart.0.total_quantity }}</strong>
        <br>
        На сумму:  <strong> $ {{ cart.0.total_cost|floatformat:'g' }}</strong>
    </div>
</div>
{% endif %}
{% endblock %}